# UI仕様書 - 週間予定管理アプリ

## 概要
このドキュメントは現在実装されているUIの詳細仕様を記載しています。

## 1. ダッシュボード統計

### 1.1 KPIカード（4種類）
- **今週の予定**: 全予定数の合計
- **M便**: M便の予定数（赤色アイコン、カレンダーマーク）
- **別便**: 別便の予定数（黄色アイコン、上下矢印マーク）
- **人員のみ**: 人員派遣のみの予定数（緑色アイコン、人型マーク）

## 2. 週間カレンダー

### 2.1 表示形式
- **PC版**: 7列グリッド表示（日〜土）
- **モバイル版**: 1列リスト表示

### 2.2 予定カードの色分け
- **M便**: 赤系ボーダー（`border-red-500`）
- **別便**: 黄系ボーダー（`border-amber-500`）
- **人員のみ**: 緑系ボーダー（`border-emerald-500`）

### 2.3 予定カード表示項目
**各項目に色分けラベル付きで表示**:
- **時間:** [開始時間 - 終了時間] （ラベル: blue-600）
- **得意先名:** [会社名] （ラベル: purple-600）
- **現場名:** [現場名] （ラベル: emerald-600）
- **現場住所:** [住所] （ラベル: amber-600）
- **担当:** [担当者名] （ラベル: indigo-600）
- **アイコン表示（常時表示順）**:
  - 🗓️ M便（赤色背景、カレンダーアイコン）
  - ↕️ 別便（黄色背景、上下矢印アイコン）
  - 👤 人員のみ（緑色背景、人型アイコン）
  - 👤 担当者同行あり（青色背景、条件付き表示）
  - 🙋‍♂️ 人員あり（緑色背景、人数表示付き、条件付き表示）
- **引取り場所:** （ラベル: rose-600、設定がある場合のみ表示、優先順位順）
  - 🟠 引取り（運送会社等）（オレンジ色ドット）：[運送会社名] [支店名がある場合のみ]支店止め
  - 🔵 引取り（アスワン広島支店）（青色ドット）
  - 🟢 チャーター ○台（緑色ドット）

## 3. 新規予定作成フォーム

### 3.1 必須項目
- **得意先名**: テキスト入力
- **開始時間**: 5分単位選択（select）
- **現場名**: テキスト入力
- **現場住所**: テキスト入力
- **担当者**: 自動入力（ログイン中ユーザー名）

### 3.2 任意項目
- **終了時間**: 5分単位選択（select、開始時間+5分以降）
- **運送区分**: セレクトボックス（M便、別便、人員のみ）
- **人員**: チェックボックス（人数1-10名、時間4hまたは8h必須）
  - 「人員のみ」選択時は自動でON
- **担当者同行**: チェックボックス
- **運送区分詳細**: チェックボックス（複数選択可、優先順位順）
  - 引取り（運送会社等）：運送会社選択 + 支店名入力
    - 「その他」選択時は「その他引取り場所」入力フィールド表示
  - 引取り（アスワン広島支店）
  - チャーター：台数1-10台選択
- **備考**: テキストエリア

### 3.2.1 運送区分セクション（新規追加）
**表示形式**: チェックボックス形式（複数選択可能）

#### 3.2.1.1 アスワン広島支店止め
- シンプルなチェックボックス
- チェック時に青色ドットで表示

#### 3.2.1.2 チャーター
- チェックボックス + 台数選択
- チェック時に台数選択欄（1-10台）が表示
- デフォルト: 1台
- 表示時は緑色ドットで「チャーター ○台」

#### 3.2.1.3 運送会社選択
- チェックボックス + 詳細入力欄
- チェック時に以下が表示:
  - **運送会社選択**: ドロップダウン
    - プリセット: オカケン、福山通運、トナミ運輸、西濃運輸、その他
  - **その他選択時**: 運送会社名入力欄が追加表示
  - **支店名**: テキスト入力欄
- 表示時はオレンジ色ドットで「[運送会社名] [支店名]支店止め」

### 3.3 UI動作
- アルバイトチェックボックスをオンにすると人数選択が表示
- チャーターチェックボックスをオンにすると台数選択が表示
- 運送会社選択チェックボックスをオンにすると運送会社・支店名入力欄が表示
- 運送会社で「その他」選択時は運送会社名入力欄が追加表示
- モーダル閉じる時に全フォーム状態（運送区分含む）がリセット
- 区分のデフォルト値は「エムワーク便」
- 運送区分は複数選択可能（例: アスワン広島支店止め + チャーター2台）

## 4. 予定詳細モーダル

### 4.1 表示項目（読み取り専用）
- 得意先名
- 時間（開始 - 終了）
- 現場名
- 現場住所
- 担当者
- 運送区分
- **引取り場所**:
  - 設定されている運送区分を色付きドット + テキストで表示
  - 複数設定時は縦並びで表示
  - 設定がない場合は非表示
- 担当者同行（チェックボックス表示）
- アルバイト（チェックボックス表示 + 人数）
- 備考（ある場合のみ表示）

### 4.2 操作ボタン
- **閉じる**: モーダルを閉じる
- **編集**: 編集モードへ移行（未実装）
- **削除**: 予定削除（未実装）

## 5. ヘッダー

### 5.1 左側
- アプリロゴ（青色の四角にカレンダーアイコン）
- タイトル: 「週間予定管理」
- サブタイトル: 「Schedule Management System」

### 5.2 右側
- 通知アイコン（赤色バッジ付き）
- **ユーザー管理ボタン**（管理者限定）: 青色ボタン、ユーザー一覧アイコン
- ユーザープロフィール
  - ユーザーアイコン（イニシャル表示）
  - ユーザー名
  - 権限表示（管理者/一般ユーザー）
- ドロップダウンメニュー
  - プロフィール
  - 設定
  - ログアウト

## 6. ユーザー管理画面（管理者限定）

### 6.1 ページ構成
- **ヘッダー**: ページタイトル「ユーザー管理」+ 「予定管理に戻る」ボタン
- **新規作成ボタン**: 「新規ユーザー作成」（青色、右上配置）
- **ユーザー一覧テーブル**: 全ユーザーの表示

### 6.2 ユーザー一覧テーブル
**表示カラム**:
- **氏名**: ユーザーアバター（イニシャル） + フルネーム
- **メールアドレス**: 登録メールアドレス
- **役割**: バッジ表示
  - 管理者: 紫色バッジ（`bg-purple-100 text-purple-800`）
  - 一般ユーザー: 緑色バッジ（`bg-green-100 text-green-800`）
- **登録日**: YYYY/MM/DD形式
- **操作**: 編集・削除ボタン

### 6.3 新規ユーザー作成モーダル
**入力項目**:
- **メールアドレス**: email入力（必須）
- **パスワード**: password入力（必須）
- **氏名**: text入力（必須）
- **役割**: セレクトボックス（一般ユーザー・管理者）

**ボタン**:
- **作成**: 青色ボタン
- **キャンセル**: グレーボタン

### 6.4 ユーザー編集モーダル
**入力項目**:
- **氏名**: text入力（必須）
- **役割**: セレクトボックス（一般ユーザー・管理者）

**ボタン**:
- **更新**: 青色ボタン
- **キャンセル**: グレーボタン

### 6.5 UI動作
- 新規作成時: Supabase Auth Admin API連携でユーザー作成
- 自分自身は削除不可（削除ボタン非表示）
- 削除時: 確認ダイアログ表示
- 作成・編集・削除後: 成功メッセージ表示 + 一覧更新

## 7. レスポンシブデザイン

### 7.1 ブレークポイント
- **sm**: 640px以上 - スマートフォン横向き
- **md**: 768px以上 - タブレット
- **lg**: 1024px以上 - PC
- **xl**: 1280px以上 - 大画面PC

### 7.2 モバイル最適化
- カレンダーがリスト表示に切り替わる
- 統計カードが縦並びに変更
- タッチ操作に最適化されたボタンサイズ

## 8. カラーシステム

### 8.1 プライマリカラー
- **Blue 500**: `#3b82f6` - メインボタン、リンク
- **Blue 600**: `#2563eb` - ホバー状態

### 8.2 予定タイプ別カラー
- **エムワーク便**: Red 500 (`#ef4444`)
- **別便**: Amber 500 (`#f59e0b`)
- **人員のみ**: Emerald 500 (`#10b981`)
- **通常**: Gray 500 (`#6b7280`)

### 8.3 ステータスカラー
- **成功**: Emerald 600 (`#059669`)
- **警告**: Amber 600 (`#d97706`)
- **エラー**: Red 600 (`#dc2626`)

### 8.4 ラベルカラーシステム
予定カード内の各項目ラベルの色分け:
- **時間**: Blue 600 (`#2563eb`)
- **得意先名**: Purple 600 (`#9333ea`)
- **現場名**: Emerald 600 (`#059669`)
- **現場住所**: Amber 600 (`#d97706`)
- **担当**: Indigo 600 (`#4338ca`)
- **引取り場所**: Rose 600 (`#e11d48`)

### 8.5 ユーザー管理カラー
- **管理者役割**: `#9333ea` (Purple 600) - 管理者バッジ背景
- **一般ユーザー役割**: `#059669` (Emerald 600) - 一般ユーザーバッジ背景
- **ユーザーアバター**: `#dbeafe` (Blue 100) - アバター背景

## 9. 予定カード表示の詳細仕様

### 9.1 色分けラベル付き表示の実装
すべての項目に色分けされたラベルを付けて表示：

```
時間: 09:00 - 17:00                    [M便]  ← 青色ラベル
得意先名: 重要案件株式会社               ← 紫色ラベル
現場名: 本社ビル                         ← 緑色ラベル
現場住所: 東京都渋谷区神南1-1-1         ← 琥珀色ラベル
担当: 山田太郎                          ← インディゴ色ラベル

引取り場所:                              ← ローズ色ラベル
  🔵 アスワン広島支店止め
  🟢 チャーター 3台
  🟠 オカケン 品川支店止め
```

### 9.2 引取り場所の表示ルール
- **表示条件**: 運送区分が1つ以上設定されている場合のみ表示
- **表示形式**: インデント付きの色付きドット + テキスト
- **複数設定**: 縦並びで全項目を表示
- **ラベル**: 「引取り場所:」として運送区分より分かりやすい名称を使用

### 9.3 レスポンシブ対応
- PC版・モバイル版共に同じ表示形式
- 長いテキストは`truncate`で適切に省略
- 各項目間の適切なスペーシング（`mb-1`, `mb-2`）

## 10. UI/UX限界突破実装

### 10.1 グラスモーフィズム効果
- **背景**: グラデーション背景 (`gradient-bg`)
- **ガラス効果**: 半透明背景 + ブラー効果 (`glass`, `bg-white bg-opacity-90-95`)
- **適用箇所**: ヘッダー、カレンダーヘッダー、予定カード、ドロップダウンメニュー

### 10.2 マイクロインタラクション
- **ホバーエフェクト**: 浮上効果 (`hover-lift`)
- **ボタンアニメーション**: スケール効果 (`btn-hover-scale`)
- **浮遊アニメーション**: ロゴ・アイコン (`animate-float`)
- **登場アニメーション**: `animate-fade-in-up`, `animate-scale-in`
- **パルスグロー**: 今日の日付強調 (`animate-pulse-glow`)

### 10.3 グラデーションシステム
- **プライマリ**: `gradient-primary` (青系)
- **危険**: `gradient-danger` (赤系)  
- **警告**: `gradient-warning` (黄系)
- **成功**: `gradient-success` (緑系)
- **背景**: `gradient-bg` (紫-青グラデーション)

### 10.4 シャドウシステム
- **エレガント**: `shadow-elegant` (標準シャドウ)
- **フローティング**: `shadow-floating` (浮遊効果用)
- **z-index階層**: 背景(z-0) → ヘッダー(z-10) → ドロップダウン親(z-50) → ドロップダウン(z-9999)

### 10.5 レスポンシブ対応
- **ドロップダウンメニュー**: スマホでは`fixed`配置、PCでは`absolute`配置
- **通知パネル**: スマホ(`w-[calc(100vw-2rem)]`)、PC(`w-96`)
- **外側クリック**: 全デバイスで統一された操作感

### 10.6 予定カードレイアウト
- **2行構造**: 時間+運送区分ラベル(1行目)、アイコン(2行目)
- **運送区分ラベル**: 独立表示で視認性確保
- **背景**: `bg-white bg-opacity-90`で高コントラスト

## 11. フォント

### 10.1 フォントファミリー
```css
font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', 'Yu Gothic Medium', 'Meiryo', sans-serif;
```

### 10.2 フォントサイズ
- **見出し1**: `text-2xl` (24px)
- **見出し2**: `text-xl` (20px) 
- **見出し3**: `text-lg` (18px)
- **本文**: `text-base` (16px)
- **キャプション**: `text-sm` (14px)
- **小テキスト**: `text-xs` (12px)

---

**作成日**: 2025年8月11日  
**最終更新**: 2025年8月17日  
**バージョン**: 1.5

### 更新履歴
- **v1.5** (2025年8月17日): UI/UX限界突破実装
  - グラスモーフィズム効果の全面導入
  - マイクロインタラクション強化（ホバー・タップ・浮遊アニメーション）
  - 未来感のあるグラデーション背景とシャドウシステム
  - 視認性改善（高コントラストテキスト・適切な背景透明度）
  - 予定カードレイアウト改善（運送区分ラベル独立表示）
  - ドロップダウンメニューz-index問題解決
  - スマホ対応強化（通知ドロップダウン表示最適化）
  - 外側クリック機能とUX改善（×ボタン配置最適化）
- **v1.4** (2025年8月17日): ユーザー管理機能追加
  - 階層型ユーザー管理システム実装（超級管理者→管理者→一般ユーザー）
  - 管理者用ユーザー管理画面の追加（section 6）
  - ユーザー作成・編集・削除機能
  - Supabase Auth Admin API連携
  - ユーザー管理カラーシステム追加
  - ヘッダーに管理者限定ユーザー管理ボタン追加
- **v1.3** (2025年8月15日): 予定カード視認性向上
  - 各項目ラベルの色分け実装（時間、得意先名、現場名、現場住所、担当、引取り場所）
  - ラベルカラーシステムの導入と仕様文書化
  - 視認性向上のためのUI改善
- **v1.2** (2025年8月15日): 予定カード表示の改善
  - 各項目にラベル付き表示（時間:、得意先名:、現場名:、現場住所:、担当:）
  - 現場住所を新規表示項目として追加
  - 運送区分を「引取り場所」に名称変更
  - 引取り場所の表示条件とスタイル改善
- **v1.1** (2025年8月15日): 運送区分機能追加
  - チェックボックス形式の運送区分セクション追加
  - アスワン広島支店止め、チャーター、運送会社選択機能
  - カレンダー表示への運送区分反映
  - 予定詳細モーダルでの運送区分表示
- **v1.0** (2025年8月11日): 初版作成